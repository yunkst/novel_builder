# 阅读页面悬浮按钮透明背景

**任务ID**: 阅读页面悬浮按钮透明背景
**创建时间**: 2026-01-12 22:30:20
**状态**: 进行中

---

## 任务描述

将阅读页面的悬浮按钮背景色改成透明的，解决深蓝色背景遮挡小说内容的问题。

---

## 技术上下文

- **模块**: novel_app (Flutter)
- **涉及文件**:
  - `novel_app/lib/widgets/reader_action_buttons.dart` - 悬浮按钮组件
  - `novel_app/lib/screens/reader_screen.dart` - 使用悬浮按钮的页面

- **当前问题**: FloatingActionButton 默认使用 Material 主题色作为背景，导致遮挡小说内容

---

## 选定方案

**方案 1：完全透明背景 + 保留图标颜色**

- 使用 `Colors.transparent` 设置背景完全透明
- 保持按钮功能完整性
- 代码改动最小

---

## 执行步骤

### 步骤 1：分析现有 backgroundColor 逻辑
- [x] 定位所有 backgroundColor 属性赋值位置
- 当前有 4 处设置背景色

### 步骤 2：修改改写按钮背景色
- [ ] 文件：`reader_action_buttons.dart:31`
- 修改：`backgroundColor: Colors.green` → `backgroundColor: Colors.transparent`

### 步骤 3：修改特写模式按钮背景色
- [ ] 文件：`reader_action_buttons.dart:48`
- 修改：`backgroundColor: isCloseupMode ? Colors.blue : null` → `backgroundColor: Colors.transparent`

### 步骤 4：修改自动滚动按钮背景色
- [ ] 文件：`reader_action_buttons.dart:60`
- 修改：`backgroundColor: isAutoScrolling && !isAutoScrollPaused ? Colors.red : null` → `backgroundColor: Colors.transparent`

### 步骤 5：验证修改
- [ ] 运行 `flutter analyze` 检查代码质量

---

## 代码变更预览

```dart
// 改写按钮（第27-33行）
FloatingActionButton.extended(
  onPressed: onRewritePressed,
  icon: const Icon(Icons.edit),
  label: const Text('改写'),
- backgroundColor: Colors.green,
+ backgroundColor: Colors.transparent,
  heroTag: 'rewrite',
),

// 特写模式按钮（第44-51行）
FloatingActionButton(
  onPressed: onToggleCloseupMode,
  tooltip: isCloseupMode ? '关闭特写模式' : '开启特写模式',
  heroTag: 'closeup_mode',
- backgroundColor: isCloseupMode ? Colors.blue : null,
+ backgroundColor: Colors.transparent,
  child: Icon(isCloseupMode ? Icons.visibility : Icons.visibility_off),
),

// 自动滚动按钮（第54-66行）
FloatingActionButton(
  onPressed: onToggleAutoScroll,
  tooltip: ...
  heroTag: 'auto_scroll',
- backgroundColor: isAutoScrolling && !isAutoScrollPaused ? Colors.red : null,
+ backgroundColor: Colors.transparent,
  child: Icon(...),
),
```

---

## 验证标准

- [ ] 所有悬浮按钮背景色为透明
- [ ] 按钮功能正常（点击、状态切换）
- [ ] 无 Flutter 分析警告
- [ ] 小说内容不被遮挡

---

## 执行记录

### 2026-01-12 22:30:20 - 开始执行
- 创建计划文档
- 准备修改代码
