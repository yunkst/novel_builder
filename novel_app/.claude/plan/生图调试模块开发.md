# 生图调试模块开发计划

## 任务概述
在Flutter应用底部导航添加生图调试模块，提供图片生成、显示和调试功能。

## 技术背景
- **项目**: Novel Builder - Flutter小说阅读应用
- **现有组件**: SceneIllustrationImageWidget, SceneIllustrationService
- **API接口**: /api/scene-illustration/generate
- **导航结构**: 底部NavigationBar（书架、搜索、设置）

## 实现方案
选择方案1：扩展现有导航结构，添加第4个"生图调试"导航项

## 开发步骤

### 步骤1：修改HomePage底部导航
- 文件：lib/main.dart
- 添加IllustrationDebugScreen到_pages列表
- 添加第4个导航项（Icons.image，生图调试）

### 步骤2：创建IllustrationDebugScreen页面
- 文件：lib/screens/illustration_debug_screen.dart
- Scaffold结构 + AppBar
- FloatingActionButton（+号）
- ListView显示图片列表
- 状态管理

### 步骤3：创建生图请求弹窗
- 文件：lib/widgets/illustration_request_dialog.dart
- Dialog组件
- 生图要求输入框
- 生图数量选择器
- 确认/取消按钮

### 步骤4：创建调试数据模型
- 文件：lib/models/illustration_debug_item.dart
- 请求内容、数量、时间、URL列表、状态
- JSON序列化支持

### 步骤5：集成API服务和组件
- 复用SceneIllustrationService
- 复用SceneIllustrationImageWidget
- API调用和状态处理

### 步骤6：完善用户体验
- 加载状态
- 错误处理
- 重试机制
- UI优化

## 预期产出
- 新增导航项：生图调试
- 完整的图片生成和显示流程
- 调试友好的用户界面

## 复用资源
- SceneIllustrationImageWidget：图片显示组件
- SceneIllustrationService：API调用服务
- 现有主题和设计系统