# 场景描写参数优化执行计划

## 背景
根据用户需求，优化Dify场景描写生成的参数：
- current_chapter_content取当前选择段落之前的内容
- roles是在current_chapter_content中出现的角色名对应的人物卡
- cmd写死"场景描写"
- 删除generation_requirements和current_paragraph参数

## 发现的现有实现
SceneIllustrationDialog中已有：
1. `_getMatchableContent`方法：获取段落之前内容
2. `_findAppearingCharacters`方法：筛选出现的角色
3. `_preselectAppearingCharacters`方法：预选角色

## 执行方案
直接在SceneIllustrationDialog中传递正确参数，简化DifyService中的逻辑。

## 修改内容
1. 修改SceneIllustrationDialog中generateSceneDescriptionStream的调用参数
2. 简化_formatSceneDescriptionInput方法的参数结构
3. 更新generateSceneDescriptionStream方法签名