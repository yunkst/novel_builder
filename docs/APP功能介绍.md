# Novel Builder 移动应用功能介绍

> 🚀 **创新阅读体验，AI增强的小说世界探索器**

[![Flutter](https://img.shields.io/badge/Flutter-3.0+-02569B.svg)](https://flutter.dev)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104+-009688.svg)](https://fastapi.tiangolo.com)
[![AI](https://img.shields.io/badge/AI-Powered-FF6B6B.svg)](#)

## 📱 产品概述

### 项目定位

Novel Builder 是一款革命性的 **AI增强型小说阅读应用**，它彻底颠覆了传统的阅读体验。通过融合先进的人工智能技术，我们为读者打造了一个沉浸式的多媒体小说世界，让阅读不再是单向的文字接收，而是与角色互动、场景可视化的全方位体验。

### 核心价值主张

- **🎭 角色与你同在**: AI生成的角色卡让小说人物栩栩如生
- **🎬 场景动态呈现**: 静态插图转换为生动的Live Photo视频
- **🧠 智能内容生成**: AI辅助理解和扩展小说内容
- **📚 跨平台阅读体验**: Android、iOS、Windows全平台支持
- **🔋 无缝离线阅读**: 智能缓存确保任何环境下的畅快阅读

### 技术架构概览

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Flutter App   │◄──►│   FastAPI 后端  │◄──►│   AI 服务       │
│                 │    │                 │    │                 │
│ • Material UI   │    │ • RESTful API   │    │ • Dify 工作流    │
│ • SQLite 本地库 │    │ • PostgreSQL    │    │ • 图像生成      │
│ • 多媒体缓存    │    │ • 爬虫系统      │    │ • 视频生成      │
│ • 离线支持      │    │ • WebSocket     │    │ • 内容生成      │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## 📖 核心阅读功能

### 🏠 个人书架管理

**功能亮点**：
- **智能收藏系统**: 一键添加小说到个人书架，自动获取封面、作者、简介等信息
- **阅读进度可视化**: 实时显示每本书的阅读进度和章节缓存状态
- **断点续读**: 精确记录最后阅读位置，下次打开无缝继续
- **批量管理**: 支持批量缓存章节、删除书籍、更新信息等操作

**用户体验**：
```
📚 书架展示 → 网格化布局，封面美观
📊 进度显示 → 已读/未读章节一目了然
🔄 自动缓存 → 应用活跃时后台静默缓存
💾 本地存储 → SQLite数据库，快速访问
```

### 🔍 智能搜索系统

**强大搜索能力**：
- **跨站点统一搜索**: 同时搜索多个小说站点，一次获取全面结果
- **智能结果聚合**: 自动去重，按相关度排序
- **源站过滤**: 可选择特定站点进行精准搜索
- **实时反馈**: 搜索结果即时显示，包含详细信息

**支持的站点**：
- 📚 **书库 (Shukuge)** - 综合性小说书库
- 📱 **小说网 (Xspsw)** - 移动端优化站点
- 🏛️ **我的书城 (Wdscw)** - 精品小说免费阅读

**搜索流程**：
```
输入关键词 → 并行请求多站点 → 结果聚合去重 → 展示搜索结果 → 一键添加/阅读
```

### 📖 沉浸式阅读器

**核心阅读功能**：
- **流畅翻页**: 支持滑动翻页、点击翻页，提供多种翻页动画
- **个性化设置**: 字体大小调节、亮色/暗色主题切换、背景色自定义
- **智能导航**: 章节列表快速跳转、左右滑动手势操作
- **内容增强**: 支持文本高亮、段落选择、关键词搜索

**高级功能**：
- **用户创作空间**: 支持用户插入自定义章节内容
- **编辑保护**: 用户添加的章节不会被自动更新覆盖
- **阅读统计**: 记录阅读时间、速度等数据
- **书签管理**: 支持添加、编辑、删除书签

### 🔋 离线阅读能力

**智能缓存策略**：
- **分层缓存**: 内存缓存 → 数据库缓存 → 文件缓存
- **优先级管理**: 最近阅读的小说优先缓存
- **空间优化**: 智能清理过期缓存，控制存储使用
- **后台更新**: 不影响用户体验的情况下静默更新内容

**离线体验**：
```
✅ 已缓存章节完全离线可用
✅ 阅读进度本地保存，联网后自动同步
✅ 角色信息和插图本地缓存
✅ 搜索历史和用户偏好本地存储
```

## 🤖 AI增强功能

### 👥 角色卡生成系统

**完整的角色管理**：

**角色属性信息**：
- 基本信息: 姓名、年龄、性别、职业
- 外貌特征: 发型、眼睛、身材、穿衣风格
- 性格特点: 性格描述、行为习惯
- 背景故事: 角色经历、人际关系

**AI生成流程**：
```
1. 阅读过程识别新角色
2. 用户填写详细角色信息
3. AI基于描述生成角色头像
4. 角色信息自动同步到后续AI生成
```

**功能特色**：
- **多角度生成**: 头像、半身像、全身像多种选择
- **风格定制**: 支持不同艺术风格的角色形象
- **图集管理**: 角色多张图片的浏览和管理
- **智能匹配**: 在后续内容生成中自动包含角色信息

### 🎨 场景插图绘制

**智能场景理解**：
- **段落智能识别**: 自动提取场景描述和关键元素
- **多角色支持**: 可选择当前场景中的出场角色
- **位置管理**: 支持在段落前后、章节任意位置插入插图
- **批量生成**: 一次请求生成多张不同角度的场景插图

**用户工作流**：
```
选择段落 → 设置角色 → 调整参数 → AI生成插图 → 插入位置选择 → 完成嵌入
```

**技术实现**：
- 使用 `SceneIllustrationService` 管理插图生成任务
- 支持多种AI模型选择和参数调整
- 实时任务状态跟踪和进度显示
- 自动在章节内容中插入媒体标记

### 🎬 图生视频技术

**创新视频功能**：
- **Live Photo效果**: 5秒短视频循环播放，类似iOS的Live Photo
- **智能动态化**: 基于静态图片，用户描述想要的动态效果
- **无缝集成**: 视频生成完成后自动替换静态插图
- **性能优化**: 使用 `VideoCacheManager` 统一管理，避免内存泄漏

**视频生成示例**：
```dart
// 用户交互流程
选择插图 → 输入动态描述 → AI生成视频 → 自动播放循环
```

**描述示例**：
- "角色微微转头，露出微笑"
- "风吹动树叶，光影变化"
- "水波荡漾，倒影清晰"
- "角色眨眼，表情生动"

**播放控制**：
- **智能可见性检测**: 只有在屏幕可见时播放视频
- **应用生命周期管理**: 应用进入后台时自动暂停
- **资源统一管理**: 最多缓存10个视频控制器，避免内存溢出

### 🧠 AI内容生成

**基于Dify工作流的智能生成**：
- **流式响应**: AI生成内容实时显示，提供即时反馈
- **上下文理解**: 基于已有内容智能续写和扩展
- **场景描述生成**: 自动生成详细的环境和情节描述
- **角色一致性**: 确保AI生成内容与已有角色设定一致

## 🎨 多媒体体验

### 📹 Live Photo视频播放

**独特的播放体验**：
- **无缝循环**: 5秒视频自动循环播放，创造生动效果
- **静音播放**: 避免干扰阅读体验
- **自动控制**: 无用户控制条界面，简洁美观
- **智能暂停**: 页面不可见时自动暂停，节省资源

**技术特点**：
```dart
class VideoPlayerWidget extends StatefulWidget {
  // 自动播放控制
  // 生命周期管理
  // 内存优化
}
```

### 🗂️ 媒体缓存管理

**智能缓存系统**：
- **图片缓存**: 自动缓存生成的插图，支持离线浏览
- **视频缓存**: 5秒视频文件的本地存储和快速访问
- **生命周期管理**: 应用销毁时自动释放媒体资源
- **空间控制**: 智能清理过期媒体文件，控制存储空间

### 📱 内容嵌入技术

**无缝媒体集成**：
- **自动标记**: 在章节内容中插入媒体位置标记
- **响应式布局**: 媒体内容自适应不同屏幕尺寸
- **加载优化**: 懒加载和预加载策略结合
- **错误恢复**: 媒体加载失败时的优雅降级

## 🎯 用户使用流程

### 🆕 新用户引导

**首次使用流程**：
```
1. 欢迎页面 → 介绍应用特色功能
2. 权限请求 → 存储权限、网络权限
3. 服务器配置 → 输入API地址和令牌
4. 功能导览 → 各个功能模块的简单介绍
5. 开始使用 → 进入搜索页面，开始阅读之旅
```

### 📚 核心功能操作路径

**阅读一本书的完整流程**：
```
搜索小说 → 查看详情 → 添加到书架 → 开始阅读 → 体验AI功能
```

**AI增强阅读体验**：
```
遇到新角色 → 创建角色卡 → 生成角色图片 → 识别关键场景 → 生成场景插图 → 转换为视频
```

### 🛠️ 高级功能使用

**设置和管理**：
```
设置页面 → 后端服务配置 → Dify AI配置 → 缓存管理 → 导出数据
```

**数据同步**：
```
本地数据 → 云端同步 → 多设备一致 → 冲突解决 → 数据恢复
```

## 💡 技术特色亮点

### 🎨 Material Design 3 界面

**现代化设计语言**：
- **自适应主题**: 跟随系统自动切换亮色/暗色主题
- **流畅动画**: 页面切换、元素交互动画效果
- **无障碍设计**: 支持大字体、高对比度等辅助功能
- **响应式布局**: 适配手机、平板、桌面等不同屏幕

### ⚡ 性能优化策略

**多线程处理**：
- **异步网络请求**: 不阻塞UI线程的后台数据获取
- **后台任务队列**: 缓存任务、AI生成任务的队列化管理
- **智能预加载**: 根据用户行为预测性加载内容

**内存管理**：
- **资源池化**: 图片、视频等资源的统一管理和复用
- **自动释放**: 页面销毁时及时释放相关资源
- **内存监控**: 实时监控内存使用，防止内存泄漏

### 🔄 跨平台一致性

**Flutter跨平台优势**：
- **单一代码库**: 一套代码支持Android、iOS、Windows多平台
- **原生性能**: 编译为原生代码，性能媲美原生应用
- **平台特性**: 充分利用各平台特性和设计规范
- **数据同步**: 跨设备数据无缝同步和一致性

### 🔒 数据安全保护

**多重安全机制**：
- **本地加密**: 敏感数据本地加密存储
- **传输安全**: HTTPS/TLS加密传输
- **访问控制**: API令牌认证和权限管理
- **隐私保护**: 用户数据最小化收集原则

## 🏆 项目价值和优势

### 🆚 相比传统阅读器的优势

| 功能特性 | 传统阅读器 | Novel Builder |
|---------|-----------|---------------|
| **阅读方式** | 纯文字阅读 | 多媒体沉浸式阅读 |
| **角色理解** | 读者想象 | AI生成可视化角色 |
| **场景体验** | 文字描述 | 动态插图和视频 |
| **内容创作** | 只能阅读 | 支持用户创作和插入 |
| **技术先进性** | 基础功能 | AI驱动的智能体验 |

### 🚀 AI技术创新点

**核心技术突破**：
- **角色识别和管理**: AI辅助的角色信息提取和管理
- **场景可视化**: 从文字到图像、再到视频的完整转换链
- **智能内容生成**: 基于上下文的AI内容创作和扩展
- **多模态融合**: 文字、图像、视频的无缝集成体验

### 💫 用户体验提升

**阅读体验革命**：
- **参与感增强**: 从被动阅读转向主动参与创作
- **理解加深**: 可视化帮助用户更好地理解角色和场景
- **情感共鸣**: 生动的多媒体内容增强情感体验
- **个性化定制**: 每个用户都能创造独一无二的阅读体验

### 🎯 目标用户群体

**主要用户画像**：
- **小说爱好者**: 寻求更丰富阅读体验的读者
- **AI科技爱好者**: 对新技术应用感兴趣的用户
- **内容创作者**: 喜欢参与内容创作和分享的用户
- **年轻读者**: 追求创新体验和新奇技术的用户

---

## 📞 联系与反馈

- **项目地址**: [GitHub Repository](https://github.com/yedazhi/novel_builder)
- **问题反馈**: [Issues](https://github.com/yedazhi/novel_builder/issues)
- **功能建议**: [Discussions](https://github.com/yedazhi/novel_builder/discussions)

---

> **Novel Builder** - 重新定义阅读体验，让每一个故事都活起来！

*最后更新: 2025年12月*